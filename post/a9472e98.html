<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><meta name="keywords" content="categories-游戏服务器"><meta name="description" content="本文作为游戏服务端开发的基本大纲，是游戏实践开发中的总结。第一部分专业基础，列举部分游戏开发理论知识点，第二部分游戏开发入门，讲述游戏服务器端开发的基本要点，第三部分服务端架构，介绍架构设计中的一些基本原则。"><meta name="author" content="beyondhxl"><title>游戏服务器端开发要点 - 宇宙の騎士</title><meta description="本文作为游戏服务端开发的基本大纲，是游戏实践开发中的总结。第一部分专业基础，列举部分游戏开发理论知识点，第二部分游戏开发入门，讲述游戏服务器端开发的基本要点，第三部分服务端架构，介绍架构设计中的一些基本原则。"><meta property="og:type" content="article"><meta property="og:title" content="游戏服务器端开发要点"><meta property="og:url" content="https://www.beyondhxl.com/post/a9472e98.html"><meta property="og:site_name" content="宇宙の騎士"><meta property="og:description" content="本文作为游戏服务端开发的基本大纲，是游戏实践开发中的总结。第一部分专业基础，列举部分游戏开发理论知识点，第二部分游戏开发入门，讲述游戏服务器端开发的基本要点，第三部分服务端架构，介绍架构设计中的一些基本原则。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E7%8E%A9%E5%85%B7%E6%80%BB%E5%8A%A8%E5%91%98/toy10.jpg"><meta property="article:published_time" content="2020-05-22T23:48:24.000Z"><meta property="article:modified_time" content="2024-08-02T20:36:09.808Z"><meta property="article:author" content="beyondhxl"><meta property="article:tag" content="categories-游戏服务器"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E7%8E%A9%E5%85%B7%E6%80%BB%E5%8A%A8%E5%91%98/toy10.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://www.beyondhxl.com/post/a9472e98.html"},"headline":"游戏服务器端开发要点","image":["https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E7%8E%A9%E5%85%B7%E6%80%BB%E5%8A%A8%E5%91%98/toy10.jpg"],"datePublished":"2020-05-22T23:48:24.000Z","dateModified":"2024-08-02T20:36:09.808Z","author":{"@type":"Person","name":"beyondhxl"},"description":"本文作为游戏服务端开发的基本大纲，是游戏实践开发中的总结。第一部分专业基础，列举部分游戏开发理论知识点，第二部分游戏开发入门，讲述游戏服务器端开发的基本要点，第三部分服务端架构，介绍架构设计中的一些基本原则。"}</script><link rel="alternative" href="/atom.xml" title="宇宙の騎士" type="application/atom+xml"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/font-awesome/5.12.0/css/all.min.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/highlight.js/9.12.0/styles/atom-one-dark.min.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.12/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/css/justifiedGallery.min.css"><!--!--><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/pace/1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><script src="https://cdnjs.loli.net/ajax/libs/jquery/3.3.1/jquery.min.js"></script><script src="/js/globalUtils.js"></script></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="/img/logo1.png" alt="宇宙の騎士" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/media">影音</a><a class="navbar-item" href="/album">专辑</a><a class="navbar-item" href="/friend">友链</a><a class="navbar-item" href="/self-talking">说说</a><a class="navbar-item" href="/message">留言</a><a class="navbar-item" href="/steamgames">Steam</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="thumbnail" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E7%8E%A9%E5%85%B7%E6%80%BB%E5%8A%A8%E5%91%98/toy10.jpg" alt="游戏服务器端开发要点"></span></div><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><div style="color: #3273dc;font-size: 1.8rem;"><i class="fas fa-arrow-alt-circle-up"></i> </div><i class="far fa-calendar-plus"> </i>2020-05-22  <a class="commentCountImg" href="/post/a9472e98.html#comment-container"><span class="display-none-class">1a29debb3601853b2a086d858933829c</span><i class="far fa-comment-dots"></i> <span class="commentCount" id="1a29debb3601853b2a086d858933829c">99+</span>  </a><span class="level-item"><i class="far fa-clock"> </i>5 分钟  <i class="fas fa-pencil-alt"> </i>0.7 k</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">游戏服务器端开发要点</h1><div class="content"><blockquote>
<p>本文作为游戏服务端开发的基本大纲，是游戏实践开发中的总结。第一部分专业基础，列举部分游戏开发理论知识点，第二部分游戏开发入门，讲述游戏服务器端开发的基本要点，第三部分服务端架构，介绍架构设计中的一些基本原则。</p>
</blockquote>
<a id="more"></a>

<h2 id="一、专业基础"><a href="#一、专业基础" class="headerlink" title="一、专业基础"></a>一、专业基础</h2><h3 id="1-1、网络"><a href="#1-1、网络" class="headerlink" title="1.1、网络"></a>1.1、网络</h3><h4 id="1-1-1、理解-TCP-IP-协议"><a href="#1-1-1、理解-TCP-IP-协议" class="headerlink" title="1.1.1、理解 TCP/IP 协议"></a>1.1.1、理解 TCP/IP 协议</h4><ul>
<li>网络传输模型</li>
<li>滑动窗口技术</li>
<li>建立连接的三次握手与断开连接的四次挥手</li>
<li>连接建立与断开过程中的各种状态</li>
<li>TCP/IP 协议的传输效率</li>
</ul>
<p><strong>思考</strong></p>
<p>1、TIME_WAIT 状态怎么解释？</p>
<h4 id="1-1-2、掌握常用的网络通信-IO-模型"><a href="#1-1-2、掌握常用的网络通信-IO-模型" class="headerlink" title="1.1.2、掌握常用的网络通信 IO 模型"></a>1.1.2、掌握常用的网络通信 IO 模型</h4><ul>
<li>select、poll、epoll</li>
<li>epoll，边缘触发 ET 与水平触发 LT 的区别与应用</li>
</ul>
<h3 id="1-2、存储"><a href="#1-2、存储" class="headerlink" title="1.2、存储"></a>1.2、存储</h3><ul>
<li>计算机系统存储体系</li>
<li>程序运行时的内存结构</li>
<li>计算机文件系统，页表结构</li>
<li>内存池与对象池的实现原理，应用场景与区别</li>
<li>关系数据库 MySQL 的使用</li>
<li>共享内存</li>
</ul>
<h3 id="1-3、程序"><a href="#1-3、程序" class="headerlink" title="1.3、程序"></a>1.3、程序</h3><ul>
<li>对 C/C++ 语言有较深的理解</li>
<li>深刻理解接口，封装与多态，并且有实践经验</li>
<li>深刻理解常用的数据结构：数组、链表、二叉树、哈希表</li>
<li>熟悉常用的算法及相关复杂度：冒泡排序、快速排序、堆排序</li>
</ul>
<h2 id="二、游戏开发入门"><a href="#二、游戏开发入门" class="headerlink" title="二、游戏开发入门"></a>二、游戏开发入门</h2><h3 id="2-1、防御式编程"><a href="#2-1、防御式编程" class="headerlink" title="2.1、防御式编程"></a>2.1、防御式编程</h3><ul>
<li><p>不要相信客户端数据，一定要检验。作为服务器端你无法确定你的客户端是谁，你也不能假定它是善意的，请做好自我保护。(这是判断一个服务器端程序员是否入门的基本标准)</p>
</li>
<li><p>务必对于函数的传人参数和返回值进行合法性判断，内部子系统，功能模块之间不要太过信任，要求低耦合，高内聚</p>
</li>
<li><p>插件式的模块设计，模块功能的健壮性应该是内建的，尽量减少模块间耦合</p>
</li>
</ul>
<h3 id="2-2、设计模式"><a href="#2-2、设计模式" class="headerlink" title="2.2、设计模式"></a>2.2、设计模式</h3><ul>
<li><p>道法自然。不要迷信，迷恋设计模式，更不要生搬硬套</p>
</li>
<li><p>简化，简化，再简化，用最简单的办法解决问题</p>
</li>
</ul>
<h3 id="2-3、网络模型"><a href="#2-3、网络模型" class="headerlink" title="2.3、网络模型"></a>2.3、网络模型</h3><ul>
<li>自造轮子: select, epoll， epoll 一定比 select 高效吗？</li>
<li>开源框架: libevent、libev、ACE、muduo、skynet</li>
</ul>
<h3 id="2-4、数据持久化"><a href="#2-4、数据持久化" class="headerlink" title="2.4、数据持久化"></a>2.4、数据持久化</h3><ul>
<li>自定义文件存储，如《梦幻西游》</li>
<li>关系数据库: MySQL</li>
<li>NO-SQL 数据库: MongoDB、Redis</li>
</ul>
<p>选择存储系统要考虑的因素：稳定性，性能，可扩展性</p>
<h3 id="2-5、内存管理"><a href="#2-5、内存管理" class="headerlink" title="2.5、内存管理"></a>2.5、内存管理</h3><ul>
<li>使用内存池和对象池，禁止运行期间动态分配内存</li>
<li>对于输入输出的指针参数，严格检查，宁滥勿缺</li>
<li>写内存保护。使用带内存保护的函数 (strncpy、memcpy、snprintf、vsnprintf 等)，严防数组下标越界</li>
<li>防止读内存溢出，确保字符串以“\0”结束</li>
</ul>
<h3 id="2-6、日志系统"><a href="#2-6、日志系统" class="headerlink" title="2.6、日志系统"></a>2.6、日志系统</h3><ul>
<li>简单高效，大量日志操作不应该影响程序性能</li>
<li>稳定，做到服务器崩溃时日志不丢失</li>
<li>完备，玩家关键操作一定要记日志，理想的情况是通过日志能重建任何时刻的玩家数据</li>
<li>开关，开发日志要加级别开关控制</li>
</ul>
<h3 id="2-7、通信协议"><a href="#2-7、通信协议" class="headerlink" title="2.7、通信协议"></a>2.7、通信协议</h3><ul>
<li>采用 PDL(Protocol Design Language)， 如 Protobuf，可以同时生成前后端代码，减少前后端协议联调成本，扩展性好</li>
<li>JSON，文本协议简单、自解释、无联调成本、扩展性好，也很方便进行包过滤以及写日志</li>
<li>自定义二进制协议，精简，有高效的传输性能，完全可控，几乎无扩展性</li>
</ul>
<h3 id="2-8、全局唯一-Key-GUID"><a href="#2-8、全局唯一-Key-GUID" class="headerlink" title="2.8、全局唯一 Key(GUID)"></a>2.8、全局唯一 Key(GUID)</h3><ul>
<li>为合服做准备</li>
<li>方便追踪道具，装备流向</li>
<li>每个角色，装备，道具都应对应有全局唯一 Key</li>
</ul>
<h3 id="2-9、多线程与同步"><a href="#2-9、多线程与同步" class="headerlink" title="2.9、多线程与同步"></a>2.9、多线程与同步</h3><ul>
<li>消息队列进行同步化处理</li>
</ul>
<h3 id="2-10、状态机"><a href="#2-10、状态机" class="headerlink" title="2.10、状态机"></a>2.10、状态机</h3><ul>
<li>强化角色的状态</li>
<li>前置状态的检查校验</li>
</ul>
<h3 id="2-11、数据包操作"><a href="#2-11、数据包操作" class="headerlink" title="2.11、数据包操作"></a>2.11、数据包操作</h3><ul>
<li>合并，同一帧内的数据包进行合并，减少 IO 操作次数</li>
<li>单副本，用一个包尽量只保存一份，减少内存复制次数</li>
<li>AOI 同步中减少中间过程无用数据包</li>
</ul>
<h3 id="2-12、状态监控"><a href="#2-12、状态监控" class="headerlink" title="2.12、状态监控"></a>2.12、状态监控</h3><ul>
<li>随时监控服务器内部状态</li>
<li>内存池，对象池使用情况</li>
<li>帧处理时间</li>
<li>网络 IO</li>
<li>包处理性能</li>
<li>各种业务逻辑的处理次数</li>
</ul>
<h3 id="2-13、包频率控制"><a href="#2-13、包频率控制" class="headerlink" title="2.13、包频率控制"></a>2.13、包频率控制</h3><ul>
<li>基于每个玩家每条协议的包频率控制，瘫痪变速齿轮</li>
</ul>
<h3 id="2-14、开关控制"><a href="#2-14、开关控制" class="headerlink" title="2.14、开关控制"></a>2.14、开关控制</h3><ul>
<li>每个模块都有开关，可以紧急关闭任何出问题的功能模块</li>
<li>包频率控制可以消灭变速齿轮</li>
<li>包 id 自增校验，可以消灭 WPE</li>
<li>包校验码可以消灭包拦截篡改</li>
<li>图形识别码，可以踢掉99%非人的操作</li>
</ul>
<h3 id="2-15、热更新"><a href="#2-15、热更新" class="headerlink" title="2.15、热更新"></a>2.15、热更新</h3><ul>
<li>核心配置逻辑的热更新，如防沉迷系统，包频率控制，开关控制等</li>
<li>代码脚本热更新，如 Erlang，Lua 等</li>
</ul>
<h3 id="2-16、防刷"><a href="#2-16、防刷" class="headerlink" title="2.16、防刷"></a>2.16、防刷</h3><ul>
<li>关键系统资源（如元宝，精力值，道具，装备等）的产出记日志</li>
<li>资源的产出和消耗尽量依赖两个或以上的独立条件的检测</li>
<li>严格检查各项操作的前置条件</li>
<li>校验参数合法性</li>
</ul>
<h3 id="2-17、防崩溃"><a href="#2-17、防崩溃" class="headerlink" title="2.17、防崩溃"></a>2.17、防崩溃</h3><ul>
<li>系统底层与具体业务逻辑无关，可以用大量的机器人压力测试暴露各种 bug，确保稳定</li>
<li>业务逻辑建议使用脚本</li>
<li>系统性的保证游戏不会崩溃</li>
</ul>
<h3 id="2-18、性能优化"><a href="#2-18、性能优化" class="headerlink" title="2.18、性能优化"></a>2.18、性能优化</h3><ul>
<li>IO 操作异步化</li>
<li>IO 操作合并缓写 （事务性的提交 db 操作，包合并，文件日志缓写）</li>
<li>Cache 机制</li>
<li>减少竞态条件 (避免频繁进出切换，尽量减少锁定使用），多线程不一定优于单线程，多线程不一定比单线程快</li>
<li>减少内存复制</li>
<li>测试，用数据说话</li>
</ul>
<h3 id="2-19、运营支持"><a href="#2-19、运营支持" class="headerlink" title="2.19、运营支持"></a>2.19、运营支持</h3><ul>
<li>接口支持：实时查询，控制指令，数据监控，客服处理等</li>
<li>实现考虑提供 Http 接口</li>
</ul>
<h3 id="2-20、容灾与故障预案"><a href="#2-20、容灾与故障预案" class="headerlink" title="2.20、容灾与故障预案"></a>2.20、容灾与故障预案</h3><h2 id="三、服务器端架构"><a href="#三、服务器端架构" class="headerlink" title="三、服务器端架构"></a>三、服务器端架构</h2><h3 id="3-1、什么是好的架构"><a href="#3-1、什么是好的架构" class="headerlink" title="3.1、什么是好的架构"></a>3.1、什么是好的架构</h3><ul>
<li>满足业务要求</li>
<li>能迅速的实现策划需求，响应需求变更</li>
<li>系统级的稳定性保障</li>
<li>简化开发。将复杂性控制在架构底层，降低对开发人员的技术要求，逻辑开发不依赖于开发人员本身强大的技术实力，提高开发效率</li>
<li>完善的运营支撑体系</li>
</ul>
<h3 id="3-2、架构实践的思考"><a href="#3-2、架构实践的思考" class="headerlink" title="3.2、架构实践的思考"></a>3.2、架构实践的思考</h3><ul>
<li>简单，满足需求的架构就是好架构</li>
<li>设计性能，抓住重要的20%， 没必要从程序代码里面去抠性能</li>
<li>热更新是必须的</li>
<li>人难免会犯错，尽可能的用一套机制去保障逻辑的健壮性</li>
</ul>
<h3 id="3-3、架构分层"><a href="#3-3、架构分层" class="headerlink" title="3.3、架构分层"></a>3.3、架构分层</h3><p>一般地，会把游戏服务器的架构划分如下三层：网络接入层、游戏逻辑层、数据存储层，这样划分的主要目的是：<br>1、将底层通信与业务逻辑处理解耦合；<br>2、将业务逻辑处理与数据存储解耦合；<br>3、有利于运营部署与扩展；</p>
<p><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%9E%B6%E6%9E%84/%E6%B8%B8%E6%88%8F%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF%E5%B0%8F%E7%BB%93.jpg" alt=""></p>
<h4 id="3-3-1、网络接入层"><a href="#3-3-1、网络接入层" class="headerlink" title="3.3.1、网络接入层"></a>3.3.1、网络接入层</h4><p>网络接入层主要任务是解决来自客户端大量并发请求和负载均衡的处理，考量该层的主要性能指标是：高吞吐、低延迟、均负载，即既能同一时刻处理大批量的客户端请求（每秒至少1万个请求以上），又能快速响应，并且均负载的分布处理这些请求。</p>
<ul>
<li>高并发处理<br>1、http 接入<br>基于 web 的应用，玩家无需下载客户端，也不用担心防火墙等问题<br>2、socket 接入<br>二进制协议较文本协议能大幅度节省带宽，并且通信包可做组播等处理，以有效降低流量</li>
</ul>
<ul>
<li>IP 路由与负载均衡<br>这块跟服务器集群和 IDC 部署密切相关，主要是为了让整个服务器集群能最大化其处理能力，尤其是在业务高峰时期，整个服务器集群能均衡平滑的应对客户端请求，不至于出现某个单点服务器出现很高负载时，其它同层服务器较空闲的情况。</li>
</ul>
<h4 id="3-3-2、游戏逻辑层"><a href="#3-3-2、游戏逻辑层" class="headerlink" title="3.3.2、游戏逻辑层"></a>3.3.2、游戏逻辑层</h4><p>游戏逻辑层主要是处理游戏的具体业务逻辑，根据游戏类型和部署的不同，它会由一个或多个进程组成。</p>
<h5 id="基础系统"><a href="#基础系统" class="headerlink" title="基础系统"></a>基础系统</h5><p>1、游戏对象内存管理：这是业务系统中最基本也是最重要的系统之一，目前，我们采用基于共享内存的预分配机制，来管理游戏中各个对象所需内存的分配与回收。这样的好处是，当游戏服务器进程 Crash 时，配合运营的实时监测机制，系统自动拉取进程，在线玩家的状态数据可以无损恢复，并且在线玩家不会感觉到服务器宕机；<br>2、消息分发管理：集中处理 C-&gt;S 消息和 S-&gt;S 消息，设计时重点考虑程序的可扩展性；<br>3、系统与运营日志管理：分别用来监控服务器状态和玩家的各种行为；<br>4、游戏商城管理：对付费物品的上架、扣除、计费等处理；<br>5、玩家登录管理：玩家登录游戏时的流程统一处理；</p>
<h5 id="业务系统"><a href="#业务系统" class="headerlink" title="业务系统"></a>业务系统</h5><p>业务系统主要是说明游戏的主体内容是由哪些子模块组成，这跟具体的游戏类型关系较大。</p>
<p>1、地图与副本管理：游戏各公共场景和玩家独自的副本地图的处理，包括 Npc 与怪物分布、传送点分布、地图阻挡数据等的解析，以及地图实例和副本实例的抽象等；<br>2、移动管理：主要是实现游戏对象（玩家角色、怪物等）的地图寻路、障碍物检测，以及动态碰撞处理等功能。<br>3、装备与道具管理：主要包括装备的合成、拆分、打造、镶嵌、升星等，以及道具的获取、交易、使用等功能；<br>4、任务与事件管理：主要包括任务的领取、任务节点的更新、任务的完成和失败处理等，以及系统随机事件的产生等内容；<br>5、游戏世界状态管理：可将整个游戏世界各游戏对象的状态分成几大类与几小类，如：玩家角色的状态、技能 Buff 的状态等，然后对各状态之间关系进行统一管理；<br>6、战斗与技能管理：处理 PVE、PVP 战斗流程、伤害计算，以及各个技能、Buff、Debuff 的业务规则处理；<br>7、Npc 与怪物 AI 管理：包括 Npc 在场景中的分布规则和本身的功能处理，以及怪物的分布、刷新、各类 AI 行为的处理；<br>8、视野管理：包括玩家的视野、Npc 和怪物的视野等，设计时需要特别注意考虑各个不同场景中玩家的视野大小和视野搜索网格大小这两个重要参数，因为，它们对服务器的性能（CPU 和流量）影响很大；<br>9、宠物与坐骑管理：包括宠物和坐骑的养成、交易、附带技能和装备等功能；<br>10、社会关系管理：包括玩家组队、玩家好友、玩家交易、家族、公会、阵营、国家等社会关系功能的处理；<br>11、邮件管理：通过邮件可实现发送系统消息、发放系统道具，玩家道具交易等功能；<br>12、聊天管理：包括玩家点对点聊天、群聊等功能；</p>
<h4 id="3-3-3、数据存储层"><a href="#3-3-3、数据存储层" class="headerlink" title="3.3.3、数据存储层"></a>3.3.3、数据存储层</h4><p>数据存储层是整个服务器的关键基础系统之一，因为游戏服务器的核心功能之一就是存取玩家数据。游戏类型不同，对数据的存取需求也不一样，对于传统客户端 MMORPG 而言，一般采用 Mysql 作数据持久化，然后在 Mysql 与 GameSvr 中间实现一个 ORM 的服务提供数据的代理或缓存即可。而新兴的 Social Game 和强交互的 WebGame，则选择用 NoSql 来替代 Mysql，以满足其超大规模 IO 并发的需求。</p>
<p><strong>网络游戏服务器与数据库的关系</strong></p>
<p>一般就是每个区服对应一个数据库，比如合服就是在合并数据库，有时候两个区因为版本问题、数据库架构不同，也可能会有细微不同。访问方面一般实时数据都在内存里，通过缓存和日志的方式每隔一段时间持久化一次，同时保证数据完整性。</p>
<p>而所谓服务器就是一组程序，用来响应来自客户端的消息。平衡负载可以简单让不同的程序负责处理不同的消息，比如一个负责战斗、一个负责聊天等，或者每个程序负责不同的地图区域之类的，这个取决于架构师的设计。不过大部分的运算都只访问内存中的数据，数据库只负责保证数据持久和完整。</p>
<p>一般有两种库保存玩家的不同信息</p>
<ol>
<li>玩家登录账号的资料信息、账号内的余额，一般保存在一个库中。这个库在该公司内是通用的，登录官网可以登录查询充值，在每个游戏登录的时候都会访问，在游戏过程中的消费可以回馈到这个库里。</li>
<li>每个游戏的每个大区的每个服还会对应一个数据库。在这个库里，会保存玩家的角色信息（等级，装备，金钱……），玩家的社交关系，拍卖行，任务等一切在游戏里的数据。</li>
</ol>
<h5 id="ORM"><a href="#ORM" class="headerlink" title="ORM"></a>ORM</h5><p>ORM 即为对象关系映射，可以这样来简单的理解：我们平时操作关系型数据库，需要业务自己编写许多数据访问的代码，这样会把许多 SQL 语句直接暴露在业务代码里，十分不利于维护。利用 ORM 技术，可以避免这个问题，即业务逻辑不会直接对 DB 进行操作，而改由 ORM 来完成，业务逻辑与 ORM 服务之间约定相关协议和 API 接口，来完成对数据的增、删、改、查等功能。</p>
<h5 id="NoSql"><a href="#NoSql" class="headerlink" title="NoSql"></a>NoSql</h5><p>NoSql，指的是非关系型的数据库，它可以满足对数据库的高并发读写、对海量数据的高效率存储和访问，以及对数据库的高可扩展性和高可用性等需求，它是随着 SNS 和 Web2.0 的兴起而产生的新兴存储技术。对于游戏而言，目前它主要应用于 Social Game 和强交互的 WebGame 中。</p>
<h4 id="3-3-4、通用组件层"><a href="#3-3-4、通用组件层" class="headerlink" title="3.3.4、通用组件层"></a>3.3.4、通用组件层</h4><p>通用组件库是指那些与具体业务无关的，能应用于所有服务器开发的组件库。</p>
<h5 id="后台服务应用框架"><a href="#后台服务应用框架" class="headerlink" title="后台服务应用框架"></a>后台服务应用框架</h5><p>后台服务应用框架规范了进程的起停方式、信号处理、命令行参数等操作，框架本身实现了一个 daemon 服务所必备的消息主循环、reload 机制，以及定时器处理等功能。</p>
<h5 id="日志组件"><a href="#日志组件" class="headerlink" title="日志组件"></a>日志组件</h5><p>日志是服务器调试和定位 Bug 的主要手段之一，日志组件一般需要实现日志分级、异步写磁盘、以及按日期时间分类等功能。</p>
<h5 id="进程间通讯组件"><a href="#进程间通讯组件" class="headerlink" title="进程间通讯组件"></a>进程间通讯组件</h5><p>进程间的通讯也是服务器的核心基础功能之一，高效的进程间通讯是服务器性能的基本保障，进程间通讯组件需要实现同机器与跨机器的进程高效通讯。</p>
<p><strong>进程内线程之间的通信</strong></p>
<ol>
<li>指令消息<br>消息解包后，可以采取无锁的消息队列，然后工作线程进行业务处理。</li>
<li>连接转移<br>连接验证、同步、加入 IO 主线程，这些需要互斥加锁处理。</li>
</ol>
<p><strong>进程之间的通信</strong></p>
<ol>
<li>传统的 TCP 连接</li>
<li>绑定在 TCP 上的 RPC 连接</li>
</ol>
<h5 id="消息打包组件"><a href="#消息打包组件" class="headerlink" title="消息打包组件"></a>消息打包组件</h5><p>在许多通信程序中，需要定义一套网络协议，并需要根据网络协议对协议数据单元（PDU）进行 Pack/Unpack，以实现可移植性和网络传输的可靠性及效率。但是对协议数据单元进行 Pack/Unpack 是一个重复性很强的操作，繁琐而且容易出错（Pack 和 Unpack 容易不匹配）。而消息打包组件则简化了网络协议的制定，使得业务应用不用关心协议的 Pack/Unpack 操作，并且支持良好的数据扩展和协议版本兼容。</p>
<h2 id="四、服务器系统设计"><a href="#四、服务器系统设计" class="headerlink" title="四、服务器系统设计"></a>四、服务器系统设计</h2><p>服务器主要关注的点有：安全、性能、容灾、扩展。<br>1、安全：就是玩家用外挂伪造客户端发包怎么办？答案就是加上一堆检验。但是怎么检验才合理高效，这个就需要好好考虑了。<br>2、性能：就是你这个服务器撑不了几个人，很卡怎么办？答案就是各种优化，多线程、缓存、负载均衡、排队、异步，能用上的都用上。<br>3、容灾：就是万一你的服务器挂了怎么办？答案就是需要支持快速切换、拉起，隔离灾难，非核心进程挂掉不影响核心进程。另外怎么监控服务器，自动化处理也有需要考虑的。<br>4、扩展：就是如果玩家突然多了，服务器可以动态扩展吗？如果服务器需要修复 Bug，可以动态更新吗(热更新)？这就需要有对应的状态管理和更新机制。</p>
<h3 id="4-1、3DMMORPG-技能战斗系统"><a href="#4-1、3DMMORPG-技能战斗系统" class="headerlink" title="4.1、3DMMORPG 技能战斗系统"></a>4.1、3DMMORPG 技能战斗系统</h3><p>1、技能施法时，client 只有一个上行的请求施法包，后续施法的过程全由 server 来驱动下发施法各阶段的结果信息，如吟唱、效果伤害、命中信息等等；</p>
<p>2、弹道类技能是由 server 计算飞行时间，并不考虑飞行后的轨迹，若此时目标有移动，则 client 会做目标跟随的处理；</p>
<p>3、技能学习：由秘籍来获得技能，一本秘籍包含多个技能，被动技能不影响主动技能的属性；</p>
<p>4、Buff 系统与技能系统是相互独立的，相互之间有各自的接口进行访问；</p>
<p>5、玩家施法作群攻目标选定时，也是由 server 来完成，这时是从玩家自己的视野里搜索，而无需再搜一次动态区域（格子32*32）；</p>
<p>6、技能效果由一个主效果 +N 个 Buff 效果组成；</p>
<p>7、Buff 对象区分玩家和怪物，其存储结构独立出来放在内存池中，在施法者需要时再根据目标类型来添加；</p>
<p>8、在作技能效果计算时，尽量避免有轮循的处理，因为这样很耗 CPU。</p>
<h4 id="关于技能引发的位置同步问题"><a href="#关于技能引发的位置同步问题" class="headerlink" title="关于技能引发的位置同步问题"></a>关于技能引发的位置同步问题</h4><p>1、对于改变目标(玩家)移动速度的技能，可能会带来位置不同步的问题，即 server 下发速度改变的包时，目标玩家可能正在移动，从而导致 server 和 client 的位置不一致？<br>答：对于这个问题，一般是通过移动系统自身的位置同步策略来解决的，即移动系统发现 client 和 server 位置不一致时，通过一定的策略来补偿速度慢的一方，从而使目标玩家在接下来的一定时间内达到位置平衡。</p>
<p>2、类似性质的问题还有给目标加冰冻、定身等 Buff，也可能带来位置不同步的问题？<br>答：这个问题暂也还没有好的解决方案，目前的做法是当目标中定身 Buff 时，client 立即表现定身，即定在原地，并将此时的位置信息带给 server，server 检验合法后设置这个位置，解冻后 client 继续让玩家移动(若玩家是移动中被定身住的话)。</p>
<h4 id="冲锋技能"><a href="#冲锋技能" class="headerlink" title="冲锋技能"></a>冲锋技能</h4><p>1、在 MMORPG 游戏中，对于那些同时拥有近攻和远程系等多种职业的游戏，策划一般都会对近攻类的职业，加上冲锋类的技能，以便平衡远程类职业在攻击距离上的优势。在 client 看到的效果，是玩家边播放冲锋动作，然后快速接近目标，并对目标一个伤害，而对 server 而言，该技能与其它技能在处理的不同之处在于，施法玩家在施法的同时，也作一个位置的变更。一般 server 的处理流程是，先检查冲锋直线路径是否合法（有无阻挡）和其它施法条件，若通过，则告诉 client 可以施法，并同时设置当前玩家坐标为冲锋后的坐标（该坐标由 client 带上来）。</p>
<p>2、由于 server 移动系统在对 client 发过来的移动数据作检验时，需要检查本次移动的起步点，是否为上次移动的结束点，即作线段端点合法检查，而冲锋到达的目标点并未在上次移动的路径栈信息中，所以，server 技能系统在设置冲锋位置时，需要先清除原路径栈信息（如调用 MoveStop 接口），以便确认本次冲锋为一次全新的移动。</p>
<p>3、两个玩家同时使用冲锋技能时（目前 client 在做技能时，采用先表现的方式），出现一个玩家（冲锋目标 client）停在冲锋途中的现象，原因为 server 广播技能施法时，没有带目标主动位移的信息（client 在处理冲锋位置时，对于使用冲锋技能的 client，因为它知道冲锋到达的位置，所以它的处理没有问题，而另一个冲锋目标 client，由于它不知道对方要冲到哪里，则 client 处理时就是选择冲锋路径上的一点，这样就会看到停在冲锋途中了）所致。解决办法是，要么在协议中下发目标位移信息，要么在策划规则上，只允许同一时刻一个玩家冲锋，如冲锋加晕眩 debuff 等。</p>
<h3 id="4-2、Social-Game-与-MMORPG-在服务器架构上的差异"><a href="#4-2、Social-Game-与-MMORPG-在服务器架构上的差异" class="headerlink" title="4.2、Social Game 与 MMORPG 在服务器架构上的差异"></a>4.2、Social Game 与 MMORPG 在服务器架构上的差异</h3><h4 id="协议通信"><a href="#协议通信" class="headerlink" title="协议通信"></a>协议通信</h4><ul>
<li><p>Socail Game 为了快速开发，在通信协议的选择上均会选择 http 作为底层通信协议，这样选择的好处大致有：<br>1、方便客户端编程：http 为一应一答的同步模型；<br>2、可以选择成熟的开源 http 服务器，如：apache、nginx；</p>
</li>
<li><p>RPG选择的是基于 socket 的 TCP 通信，这是由游戏本身的特点所决定的，如：聊天、多人视野、服务器主动通知事件等需求</p>
</li>
</ul>
<h4 id="游戏逻辑服务器的承受能力"><a href="#游戏逻辑服务器的承受能力" class="headerlink" title="游戏逻辑服务器的承受能力"></a>游戏逻辑服务器的承受能力</h4><p>1、RPG 的游戏逻辑服务器（地图服务器）所能承载的最高在线（PCU）是在3000-5000不等；</p>
<p>2、Social Game 由于没有 RPG 复杂的移动、战斗、视野管理等需求，逻辑服务器承受的在线一般都是比较高的，如10000-30000不等</p>
<h4 id="游戏逻辑服务器的-Cache-和回写机制"><a href="#游戏逻辑服务器的-Cache-和回写机制" class="headerlink" title="游戏逻辑服务器的 Cache 和回写机制"></a>游戏逻辑服务器的 Cache 和回写机制</h4><p>1、RPG 的游戏逻辑服务器一般都需要 Cache 玩家数据，并且采取定时回写的策略，如根据数据重要程度分别作 5min-15min 不等的定时回写；</p>
<p>2、Social Game 的游戏逻辑服务器一般都无需 Cache 玩家数据，玩家的每次请求都是即时读即时写（这样会涉及到另外一个问题，即 DB 读写的性能问题，见下一条）；</p>
<h4 id="DB-存储模型的选择"><a href="#DB-存储模型的选择" class="headerlink" title="DB 存储模型的选择"></a>DB 存储模型的选择</h4><p>1、RPG 存储服务器常用的还是 MySQL（Innodb 存储引擎），中间还由业务自己写一个 Cache 代理服务器，以 Cache 热点数据；</p>
<p>2、Social Game 则会选用 TC、MemCached 等所谓 Key-Value 全内存数据存储，有实力的公司会自己实现一个类似这种机制的存储系统，它可以无源，也可以是有源，并且还可以选择用 MySQL 作数据落地，毕竟 MySQL 作为互联网业务 DB 的成熟解决方案已毋庸置疑；</p>
<h4 id="交互数据的一致性"><a href="#交互数据的一致性" class="headerlink" title="交互数据的一致性"></a>交互数据的一致性</h4><p>1、在 SNS Game 中，会经常出现同一个玩家在某一个时刻同时被多个好友访问和修改数据的情况，这时就需要保证，每次数据的更新都是正常有序进行的，而不能被写脏数据。一般地，都会使用一个类似全局锁服务的设计来解决这个问题；</p>
<p>2、RPG 不会存在这样的问题，类似的需求是：玩家可能会跨地图服务器，即所谓的跳线或跨服，这个问题的通常解决方案是服务器重新作一次下线、重登录的处理，当然，玩家是感觉不到的；</p>
<h4 id="IDC-部署"><a href="#IDC-部署" class="headerlink" title="IDC 部署"></a>IDC 部署</h4><p>1、RPG 一般是分区分服部署；<br>2、Social Game 则是全区全服部署；</p>
<h3 id="4-3、游戏排行榜的实现"><a href="#4-3、游戏排行榜的实现" class="headerlink" title="4.3、游戏排行榜的实现"></a>4.3、游戏排行榜的实现</h3><p>游戏开发中排行榜经常出现，实际开发端游项目遇到的排行榜是根据玩家的某种特征对所有玩家进行排序(装备评分、人物等级…等)。排行榜需求不是实时显示，而且客户端也只显示 TopK(K=10、50、100) 的排名玩家。</p>
<p><strong>排行榜的主要作用</strong>：</p>
<p>1、排行榜内容是部分有序的玩家信息(以等级为例)<br>2、玩家等级变化后，需更新排行榜<br>3、根据玩家 ID 获取其在排行榜中的排名<br>4、获取排行榜中特定排名的玩家</p>
<h3 id="4-4、卡牌游戏和弱连接"><a href="#4-4、卡牌游戏和弱连接" class="headerlink" title="4.4、卡牌游戏和弱连接"></a>4.4、卡牌游戏和弱连接</h3><p>随着游戏类型复杂度提升，在一种游戏里，以某一种核心内容为主(卡牌)，其他内容为辅(横版、PVP 等)的做法比较常见。但并非百分百的卡牌游戏都固定地使用弱连接模式，可以通过游戏的表现来判断是否使用弱连接。基于 PVP 的判断方式有如下两种：</p>
<h4 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h4><p>1、战斗过程中，选择的内容偏多，且时间偏长(如放牌)<br>2、战斗允许预先放置卡牌和预先连锁判断<br>3、客户端使用网页形式来制作</p>
<h4 id="第二种"><a href="#第二种" class="headerlink" title="第二种"></a>第二种</h4><p>1、没有即时交互的过程，玩家和玩家之间的对战摆完道具就自动进行计算和战斗<br>2、刷新排行榜<br>3、买卖道具</p>
<h4 id="安全性"><a href="#安全性" class="headerlink" title="安全性"></a>安全性</h4><p>在服务器登录的时候，进行一下简单的校验，比如使用时间戳或者预定随机值或者预定好的 counting 值来进行哈希，哈希后的值用作双方通信的 key 来进行加密通信，这样以后每次通信都不需要再次加密，时间戳或者随机值加上哈希可以保证每次登录的 key 不同。</p>
<p>排行榜的推送和积分，购买道具的选择和下单购买，这些都基本使用弱连接。</p>
<h3 id="4-5、地图的无缝连接"><a href="#4-5、地图的无缝连接" class="headerlink" title="4.5、地图的无缝连接"></a>4.5、地图的无缝连接</h3><p>所谓的无缝，最大的难点就是连接点，只要解决了连接点之间的通信和客户端之间的交互，就解决了无缝问题。</p>
<h3 id="4-6、帧同步中如何做移动预测"><a href="#4-6、帧同步中如何做移动预测" class="headerlink" title="4.6、帧同步中如何做移动预测"></a>4.6、帧同步中如何做移动预测</h3><p>王者荣耀，采用的是帧同步方案。不存在预测的情况，都是得在相应帧做相应的输入操作。如果到了相应帧，因为网络过卡，没有及时收到输入数据，则会锁帧等待，表现出来就是网络差时，会卡住，后来收到包时，再追帧。但是不影响其它玩家。</p>
<p>一般做预测都是用在状态同步里面，帧同步讲究的是根据操作得出确定的结果，如果网络出现问题有可能会进行等待的情况。</p>
<h3 id="4-7、包裹系统"><a href="#4-7、包裹系统" class="headerlink" title="4.7、包裹系统"></a>4.7、包裹系统</h3><h4 id="包裹中增加道具"><a href="#包裹中增加道具" class="headerlink" title="包裹中增加道具"></a>包裹中增加道具</h4><p><strong>道具如果是不能叠加的</strong></p>
<p>1、往包裹中添加道具，主要是往空位置上插入<br>2、有空位置，则加入到道具管理器中<br>3、道具有耐久度，且有扣耐久类型，比如是根据游戏时间或者物理时间，设置是时限道具</p>
<br/>

<p>参考文章：<br><a href="https://blog.csdn.net/blade2001/article/details/49095275">1、游戏服务器端开发要点</a><br><a href="http://gameislife.info/archives/299">2、游戏服务器开发技术小结</a></p>
</div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://www.beyondhxl.com/post/a9472e98.html">游戏服务器端开发要点</a></li><li><strong>本文作者：</strong><a href="https://www.beyondhxl.com">beyondhxl</a></li><li><strong>本文链接：</strong><a href="https://www.beyondhxl.com/post/a9472e98.html">https://www.beyondhxl.com/post/a9472e98.html</a></li><li><strong>版权声明：</strong><span>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</span></li></ul><div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/post/70ae5d6.html" target="_blank">C++游戏服务器知识点散记</a><br></span><span>  2.<a class="is-size-6" href="/post/a9472e98.html" target="_blank">游戏服务器端开发要点</a><br></span><span>  3.<a class="is-size-6" href="/post/1c48c532.html" target="_blank">Golang游戏服务器知识点散记</a><br></span><span>  4.<a class="is-size-6" href="/post/baad55eb.html" target="_blank">Linux的epoll使用LT+非阻塞IO和ET+非阻塞IO的区别(转载)</a><br></span><span>  5.<a class="is-size-6" href="/post/1d3a59e7.html" target="_blank">博客-Markdown使用笔记</a><br></span><span>  6.<a class="is-size-6" href="/post/85be90d7.html" target="_blank">数据库系统概论</a><br></span></div></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/css/share.min.css"><div class="social-share"></div><script src="https://cdnjs.loli.net/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button is-info donate"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E6%94%AF%E4%BB%98%E5%AE%9D/zhifubao.jpg" alt="支付宝"></span></a><a class="button is-success donate"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E5%BE%AE%E4%BF%A1/weixin.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/post/10267b43.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">进程间通信方式与线程间通信方式</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/post/63e034ab.html"><span class="level-item">Golang构造结构体对象new方法和取地址符&amp;的区别</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><div class="title is-5">评论</div><div id="comment-container"></div><link rel="stylesheet" href="https://cdnjs.loli.net/ajax/libs/gitalk/1.6.0/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            language:'zh-CN',
            id: '1a29debb3601853b2a086d858933829c',
            repo: 'blogcomment',
            owner: 'beyondhxl',
            clientID: '6e19ff696a6246d4da8b',
            clientSecret: '1518ab0356e2eeaecbdbd5efd9b654cd5c224c93',
            admin: ["beyondhxl"],
            createIssueManually: true,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget toc-scroll" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-一、专业基础" href="#一、专业基础"><span>一、专业基础</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-1、网络" href="#1-1、网络"><span>1.1、网络</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-1-1-1、理解-TCP-IP-协议" href="#1-1-1、理解-TCP-IP-协议"><span>1.1.1、理解 TCP&amp;#x2F;IP 协议</span></a></li><li><a class="is-flex toc-item" id="toc-item-1-1-2、掌握常用的网络通信-IO-模型" href="#1-1-2、掌握常用的网络通信-IO-模型"><span>1.1.2、掌握常用的网络通信 IO 模型</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-1-2、存储" href="#1-2、存储"><span>1.2、存储</span></a></li><li><a class="is-flex toc-item" id="toc-item-1-3、程序" href="#1-3、程序"><span>1.3、程序</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-二、游戏开发入门" href="#二、游戏开发入门"><span>二、游戏开发入门</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-2-1、防御式编程" href="#2-1、防御式编程"><span>2.1、防御式编程</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-2、设计模式" href="#2-2、设计模式"><span>2.2、设计模式</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-3、网络模型" href="#2-3、网络模型"><span>2.3、网络模型</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-4、数据持久化" href="#2-4、数据持久化"><span>2.4、数据持久化</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-5、内存管理" href="#2-5、内存管理"><span>2.5、内存管理</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-6、日志系统" href="#2-6、日志系统"><span>2.6、日志系统</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-7、通信协议" href="#2-7、通信协议"><span>2.7、通信协议</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-8、全局唯一-Key-GUID" href="#2-8、全局唯一-Key-GUID"><span>2.8、全局唯一 Key(GUID)</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-9、多线程与同步" href="#2-9、多线程与同步"><span>2.9、多线程与同步</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-10、状态机" href="#2-10、状态机"><span>2.10、状态机</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-11、数据包操作" href="#2-11、数据包操作"><span>2.11、数据包操作</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-12、状态监控" href="#2-12、状态监控"><span>2.12、状态监控</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-13、包频率控制" href="#2-13、包频率控制"><span>2.13、包频率控制</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-14、开关控制" href="#2-14、开关控制"><span>2.14、开关控制</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-15、热更新" href="#2-15、热更新"><span>2.15、热更新</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-16、防刷" href="#2-16、防刷"><span>2.16、防刷</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-17、防崩溃" href="#2-17、防崩溃"><span>2.17、防崩溃</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-18、性能优化" href="#2-18、性能优化"><span>2.18、性能优化</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-19、运营支持" href="#2-19、运营支持"><span>2.19、运营支持</span></a></li><li><a class="is-flex toc-item" id="toc-item-2-20、容灾与故障预案" href="#2-20、容灾与故障预案"><span>2.20、容灾与故障预案</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-三、服务器端架构" href="#三、服务器端架构"><span>三、服务器端架构</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-3-1、什么是好的架构" href="#3-1、什么是好的架构"><span>3.1、什么是好的架构</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-2、架构实践的思考" href="#3-2、架构实践的思考"><span>3.2、架构实践的思考</span></a></li><li><a class="is-flex toc-item" id="toc-item-3-3、架构分层" href="#3-3、架构分层"><span>3.3、架构分层</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-3-3-1、网络接入层" href="#3-3-1、网络接入层"><span>3.3.1、网络接入层</span></a></li><li><a class="is-flex toc-item" id="toc-item-业务系统" href="#业务系统"><span>业务系统</span></a></li><li><a class="is-flex toc-item" id="toc-item-NoSql" href="#NoSql"><span>NoSql</span></a></li><li><a class="is-flex toc-item" id="toc-item-消息打包组件" href="#消息打包组件"><span>消息打包组件</span></a></li></ul></li></ul></li><li><a class="is-flex toc-item" id="toc-item-四、服务器系统设计" href="#四、服务器系统设计"><span>四、服务器系统设计</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-4-1、3DMMORPG-技能战斗系统" href="#4-1、3DMMORPG-技能战斗系统"><span>4.1、3DMMORPG 技能战斗系统</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-关于技能引发的位置同步问题" href="#关于技能引发的位置同步问题"><span>关于技能引发的位置同步问题</span></a></li><li><a class="is-flex toc-item" id="toc-item-冲锋技能" href="#冲锋技能"><span>冲锋技能</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-4-2、Social-Game-与-MMORPG-在服务器架构上的差异" href="#4-2、Social-Game-与-MMORPG-在服务器架构上的差异"><span>4.2、Social Game 与 MMORPG 在服务器架构上的差异</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-协议通信" href="#协议通信"><span>协议通信</span></a></li><li><a class="is-flex toc-item" id="toc-item-游戏逻辑服务器的承受能力" href="#游戏逻辑服务器的承受能力"><span>游戏逻辑服务器的承受能力</span></a></li><li><a class="is-flex toc-item" id="toc-item-游戏逻辑服务器的-Cache-和回写机制" href="#游戏逻辑服务器的-Cache-和回写机制"><span>游戏逻辑服务器的 Cache 和回写机制</span></a></li><li><a class="is-flex toc-item" id="toc-item-DB-存储模型的选择" href="#DB-存储模型的选择"><span>DB 存储模型的选择</span></a></li><li><a class="is-flex toc-item" id="toc-item-交互数据的一致性" href="#交互数据的一致性"><span>交互数据的一致性</span></a></li><li><a class="is-flex toc-item" id="toc-item-IDC-部署" href="#IDC-部署"><span>IDC 部署</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-4-3、游戏排行榜的实现" href="#4-3、游戏排行榜的实现"><span>4.3、游戏排行榜的实现</span></a></li><li><a class="is-flex toc-item" id="toc-item-4-4、卡牌游戏和弱连接" href="#4-4、卡牌游戏和弱连接"><span>4.4、卡牌游戏和弱连接</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-第一种" href="#第一种"><span>第一种</span></a></li><li><a class="is-flex toc-item" id="toc-item-第二种" href="#第二种"><span>第二种</span></a></li><li><a class="is-flex toc-item" id="toc-item-安全性" href="#安全性"><span>安全性</span></a></li></ul></li><li><a class="is-flex toc-item" id="toc-item-4-5、地图的无缝连接" href="#4-5、地图的无缝连接"><span>4.5、地图的无缝连接</span></a></li><li><a class="is-flex toc-item" id="toc-item-4-6、帧同步中如何做移动预测" href="#4-6、帧同步中如何做移动预测"><span>4.6、帧同步中如何做移动预测</span></a></li><li><a class="is-flex toc-item" id="toc-item-4-7、包裹系统" href="#4-7、包裹系统"><span>4.7、包裹系统</span></a><ul class="menu-list toc"><li><a class="is-flex toc-item" id="toc-item-包裹中增加道具" href="#包裹中增加道具"><span>包裹中增加道具</span></a></li></ul></li></ul></li></ul></div></div><script type="text/javascript" async>
        $(document).ready(function () { //参考自 https://github.com/ppoffice/hexo-theme-icarus/pull/616/files
            var observerTopMargin;
            var scrollObserver;
            var headerElems = $(".headerlink");
            var activeTocItem;
        
            function initIntersectionObserver(docHeight) {
                observerTopMargin = docHeight;
                scrollObserver = new IntersectionObserver(scrollCallBack,
                    {
                        root: null,  // viewpoint
                        rootMargin: docHeight + "px 0px -80% 0px"  // cover top 30% of viewport to the top of document
                    })
            }
        
            function scrollCallBack(entries, observer) {
                if ($(window).scrollTop() > observerTopMargin * 0.7) { 
                    // User somehow scroll to 70% of observerTopMargin (which is inited as 200% document height)
                    // Observer top margin need to extend to cover all the space to the top of the document
                    initIntersectionObserver(observerTopMargin * 2)
                    observer.disconnect();
                    return;
                }
                let toActive;
                if (entries[0].intersectionRatio == 1) {  // enter viewed area
                    let entry = entries.reduce((u, v) => (u.target.toc_id > v.target.toc_id ? u : v));  // get the lowest item
                    toActive = $("#toc-item-" + $(entry.target).attr("href").substr(1));
                } else {
                    let entry = entries.reduce((u, v) => (u.target.toc_id < v.target.toc_id ? u : v));  // get the highest item
                    let idx = Math.max(entry.target.toc_id - 1, 0);
                    toActive = $("#toc-item-" + $(headerElems[idx]).attr("href").substr(1));
                }
                if (activeTocItem) activeTocItem.removeClass("is-current");
                activeTocItem = toActive
                activeTocItem.addClass("is-current");
            }
        
            initIntersectionObserver($(document).height() * 2);
            headerElems.each(function (index, obj) {
                obj.toc_id = index;
                scrollObserver.observe(obj);
            })
        });</script></div><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="/img/avatar.png" alt="宇宙の騎士"></figure><p class="title is-size-4 is-block line-height-inherit">宇宙の騎士</p><p class="is-size-6 is-block">博学之，审问之，慎思之，明辩之，笃行之</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>罗生门</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">86</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">113</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">126</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://beyondhxl.com/about/" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/beyondhxl"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Email" href="mailto:459898432@qq.com"><i class="fa fa-envelope"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Note" href="http://beyondhxl.com/mydocs/"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新评论</h3><span class="body_hot_comment">加载中，最新评论有1分钟缓存...</span></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><a class="media-left" href="/post/784ee20b.html"><p class="image is-64x64"><img class="thumbnail" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E5%93%86%E5%95%A6A%E6%A2%A6/ChMkJ1bKxwqIcn_mAANXBz3B3OEAALHuQCNRZEAA1cf424.jpg" alt="WSL-Windows上的Linux子系统"></p></a><div class="media-content size-small"><p><time dateTime="2021-01-28T18:35:31.000Z">2021-01-28</time></p><p class="title is-6"><a class="link-muted" href="/post/784ee20b.html">WSL-Windows上的Linux子系统</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a> / <a class="link-muted" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/WSL/">WSL</a></p></div></article><article class="media"><a class="media-left" href="/post/977a8d62.html"><p class="image is-64x64"><img class="thumbnail" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E5%8D%95%E6%9C%BA%E6%B8%B8%E6%88%8F/ChMkJ1wguYKIOjHjAARfEgchsmAAAt9XgKb_1EABF8q200.jpg" alt="TCP网络编程常用工具(转载)"></p></a><div class="media-content size-small"><p><time dateTime="2020-08-15T00:03:46.000Z">2020-08-15</time></p><p class="title is-6"><a class="link-muted" href="/post/977a8d62.html">TCP网络编程常用工具(转载)</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">计算机网络</a> / <a class="link-muted" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B7%A5%E5%85%B7%E5%91%BD%E4%BB%A4/">网络工具命令</a></p></div></article><article class="media"><a class="media-left" href="/post/3294d6b6.html"><p class="image is-64x64"><img class="thumbnail" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E5%8D%95%E6%9C%BA%E6%B8%B8%E6%88%8F/ChMkJlwslleIACs_AAiLFiW8JwMAAuITgDEZnEACIsu836.jpg" alt="数据结构与算法-二叉搜索树"></p></a><div class="media-content size-small"><p><time dateTime="2020-08-13T23:52:30.000Z">2020-08-13</time></p><p class="title is-6"><a class="link-muted" href="/post/3294d6b6.html">数据结构与算法-二叉搜索树</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/">数据结构与算法</a> / <a class="link-muted" href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91/">二叉搜索树</a></p></div></article><article class="media"><a class="media-left" href="/post/43ed0d63.html"><p class="image is-64x64"><img class="thumbnail" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E5%8D%95%E6%9C%BA%E6%B8%B8%E6%88%8F/ChMkJ1wslluIDUsWAAJOteVG-6YAAuITgEOUE4AAk7N608.jpg" alt="如何优雅地关闭Go语言的通道channel"></p></a><div class="media-content size-small"><p><time dateTime="2020-08-11T00:07:23.000Z">2020-08-11</time></p><p class="title is-6"><a class="link-muted" href="/post/43ed0d63.html">如何优雅地关闭Go语言的通道channel</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/Golang/">Golang</a> / <a class="link-muted" href="/categories/Golang/%E9%80%9A%E9%81%93channel/">通道channel</a></p></div></article><article class="media"><a class="media-left" href="/post/8ce5f219.html"><p class="image is-64x64"><img class="thumbnail" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="https://blogimage-1300452281.cos.ap-shanghai.myqcloud.com/%E5%8D%95%E6%9C%BA%E6%B8%B8%E6%88%8F/ChMkJ1wg0UuIMmMwAAdhOUUDAxwAAt9dgGqYjcAB2FR003.jpg" alt="深度探索C++对象模型（DataMember的布局）"></p></a><div class="media-content size-small"><p><time dateTime="2020-08-08T00:21:09.000Z">2020-08-08</time></p><p class="title is-6"><a class="link-muted" href="/post/8ce5f219.html">深度探索C++对象模型（DataMember的布局）</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/C/">C++</a> / <a class="link-muted" href="/categories/C/%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/">对象模型</a> / <a class="link-muted" href="/categories/C/%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B/%E5%AF%B9%E8%B1%A1%E6%88%90%E5%91%98%E5%B8%83%E5%B1%80/">对象成员布局</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/C/"><span class="level-start"><span class="level-item">C++</span></span><span class="level-end"><span class="level-item tag">18</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/C/C-11/"><span class="level-start"><span class="level-item">C++11</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/C/C-11/initializer-list/"><span class="level-start"><span class="level-item">initializer_list</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/C/STL/"><span class="level-start"><span class="level-item">STL</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/C/String/"><span class="level-start"><span class="level-item">String</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/C/epoll/"><span class="level-start"><span class="level-item">epoll</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/C/%E5%86%85%E5%AD%98/"><span class="level-start"><span class="level-item">内存</span></span><span class="level-end"><span class="level-item tag">2</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/C/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/"><span class="level-start"><span class="level-item">内存分配</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/C/%E5%86%85%E5%AD%98/%E5%86%85%E5%AD%98%E5%88%86%E9%85%8D/malloc%E3%80%81new/"><span class="level-start"><span class="level-item">malloc、new</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/C/%E5%86%85%E5%AD%98/%E6%A6%82%E5%BF%B5/"><span class="level-start"><span class="level-item">概念</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li></ul></li><a class="level is-mobile is-marginless" href="/categories/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2021/01/"><span class="level-start"><span class="level-item">一月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">13</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">33</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li><a class="level is-mobile is-marginless" href="/archives/"><span class="level-start"><span class="level-item">查看全部&gt;&gt;</span></span></a></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/C/"><span class="tag">C++</span><span class="tag is-grey-lightest">18</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"><span class="tag">数据结构</span><span class="tag is-grey-lightest">7</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"><span class="tag">计算机网络</span><span class="tag is-grey-lightest">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/TCP/"><span class="tag">TCP</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/"><span class="tag">字符串</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6/"><span class="tag">数学</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%AE%97%E6%B3%95/"><span class="tag">算法</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Golang/"><span class="tag">Golang</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/epoll/"><span class="tag">epoll</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/golang/"><span class="tag">golang</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/leetcode/"><span class="tag">leetcode</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="tag">操作系统</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"><span class="tag">服务器</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E7%A8%8B/"><span class="tag">线程</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><span class="tag">设计模式</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BF%9B%E7%A8%8B/"><span class="tag">进程</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%93%BE%E8%A1%A8/"><span class="tag">链表</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/"><span class="tag">面向对象</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Go/"><span class="tag">Go</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/go/"><span class="tag">go</span><span class="tag is-grey-lightest">2</span></a></div></div><div class="field is-grouped is-grouped-multiline"><a class="tags has-addons" href="/tags/"><span class="tag">查看全部&gt;&gt;</span></a></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">订阅更新</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=beyondhxl/XZjz&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="beyondhxl/XZjz" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="订阅"></div></div><p class="help">输入邮箱开始订阅，更博后邮件通知！</p></form></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDI0IDI0Ij48Y2lyY2xlIGN4PSI0IiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgaWQ9InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAiIGF0dHJpYnV0ZU5hbWU9InIiIGJlZ2luPSIwO3N2Z1NwaW5uZXJzM0RvdHNTY2FsZTEuZW5kLTAuMjVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjxjaXJjbGUgY3g9IjEyIiBjeT0iMTIiIHI9IjMiIGZpbGw9ImN1cnJlbnRDb2xvciI+PGFuaW1hdGUgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNnMiIGR1cj0iMC43NXMiIHZhbHVlcz0iMzsuMjszIi8+PC9jaXJjbGU+PGNpcmNsZSBjeD0iMjAiIGN5PSIxMiIgcj0iMyIgZmlsbD0iY3VycmVudENvbG9yIj48YW5pbWF0ZSBpZD0ic3ZnU3Bpbm5lcnMzRG90c1NjYWxlMSIgYXR0cmlidXRlTmFtZT0iciIgYmVnaW49InN2Z1NwaW5uZXJzM0RvdHNTY2FsZTAuZW5kLTAuNDVzIiBkdXI9IjAuNzVzIiB2YWx1ZXM9IjM7LjI7MyIvPjwvY2lyY2xlPjwvc3ZnPg==" data-original="/img/logo1.png" alt="宇宙の騎士" height="28"></a><p class="size-small"><span>&copy; 2024 beyondhxl</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>,Modify by <a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">removeif</a> <br><span>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br />&nbsp;&nbsp;&nbsp;&nbsp;方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br /></span><span><span id="statistic-times">loading...</span><script>function createTime(time) {
            var n = new Date(time);
            now.setTime(now.getTime() + 250),
                days = (now - n) / 1e3 / 60 / 60 / 24,
                dnum = Math.floor(days),
                hours = (now - n) / 1e3 / 60 / 60 - 24 * dnum,
                hnum = Math.floor(hours),
            1 == String(hnum).length && (hnum = "0" + hnum),
                minutes = (now - n) / 1e3 / 60 - 1440 * dnum - 60 * hnum,
                mnum = Math.floor(minutes),
            1 == String(mnum).length && (mnum = "0" + mnum),
                seconds = (now - n) / 1e3 - 86400 * dnum - 3600 * hnum - 60 * mnum,
                snum = Math.round(seconds),
            1 == String(snum).length && (snum = "0" + snum),
                document.getElementById("statistic-times").innerHTML = "❤️本站自 <strong>"+time.split(" ")[0].replace(/\//g,".")+"</strong> 已运行 <strong>" + dnum + "</strong> 天 <strong>" + hnum + "</strong> 小时 <strong>" + mnum + "</strong> 分 <strong>" + snum + "</strong> 秒！❤️";
        }var now = new Date();setInterval("createTime('2020/04/15 00:00:00')", 250,"");</script><br></span><div class="size-small"><span>❤️感谢 <strong><span id="busuanzi_value_site_uv">99+</span></strong> 小伙伴的 <strong><span id="busuanzi_value_site_pv">99+</span></strong> 次光临！❤️</span></div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/removeif/hexo-theme-amazing"><i class="fab fa-github"></i></a></p></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="/js/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="8044353" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></div></footer><script src="https://cdnjs.loli.net/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://www.beyondhxl.com',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdnjs.loli.net/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><!--!--><!--!--><script src="https://cdnjs.loli.net/ajax/libs/lightgallery/1.6.12/js/lightgallery-all.min.js" defer></script><script src="https://cdnjs.loli.net/ajax/libs/justifiedGallery/3.7.0/js/jquery.justifiedGallery.min.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="/js/toc.js" defer></script><script src="/js/main.js" defer></script><script>$.getScript('/js/comment-issue-data.js',function(){loadIssueData('6e19ff696a6246d4da8b','1518ab0356e2eeaecbdbd5efd9b654cd5c224c93','beyondhxl','blogcomment',false);})</script><link rel="stylesheet" href="/css/insight.css"><div class="searchbox ins-search"><div class="searchbox-container ins-search-container"><div class="searchbox-input-wrapper"><input class="searchbox-input ins-search-input" type="text" placeholder="想要查找什么..."><span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="searchbox-result-wrapper ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>(function (window) {
            var INSIGHT_CONFIG = {
                TRANSLATION: {
                    POSTS: '文章',
                    PAGES: '页面',
                    CATEGORIES: '分类',
                    TAGS: '标签',
                    UNTITLED: '(无标题)',
                },
                CONTENT_URL: '/content.json',
            };
            window.INSIGHT_CONFIG = INSIGHT_CONFIG;
        })(window);</script><script src="/js/insight.js" defer></script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true,
            cacheBust:false
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            if(true){
                $.getScript('/js/comment-issue-data.js',function(){loadIssueData('6e19ff696a6246d4da8b','1518ab0356e2eeaecbdbd5efd9b654cd5c224c93','beyondhxl','blogcomment',false);});
            }
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
            if(typeof loadBanner == 'function'){
                loadBanner();
            }
        });</script>
        <style>
            [bg-lazy] {
                background-image: none !important;
                background-color: #eee !important;
            }
        </style>
        <script>
            window.imageLazyLoadSetting = {
                isSPA: false,
                preloadRatio: 1,
                processImages: null,
            };
        </script><script>window.addEventListener("load",function(){var t=/\.(gif|jpg|jpeg|tiff|png)$/i,r=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(a){var e=a.parentNode;"A"===e.tagName&&(e.href.match(t)||e.href.match(r))&&(e.href=a.dataset.original)})});</script><script>!function(r){r.imageLazyLoadSetting.processImages=t;var a=r.imageLazyLoadSetting.isSPA,n=r.imageLazyLoadSetting.preloadRatio||1,d=o();function o(){var t=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")),e=Array.prototype.slice.call(document.querySelectorAll("[bg-lazy]"));return t.concat(e)}function t(t){(a||t)&&(d=o());for(var e,i=0;i<d.length;i++)0<=(e=(e=d[i]).getBoundingClientRect()).bottom&&0<=e.left&&e.top<=(r.innerHeight*n||document.documentElement.clientHeight*n)&&function(){var t,e,a,n,o=d[i];e=function(){d=d.filter(function(t){return o!==t}),r.imageLazyLoadSetting.onImageLoaded&&r.imageLazyLoadSetting.onImageLoaded(o)},(t=o).dataset.loaded||(t.hasAttribute("bg-lazy")?(t.removeAttribute("bg-lazy"),e&&e()):(a=new Image,n=t.getAttribute("data-original"),a.onload=function(){t.src=n,t.removeAttribute("data-original"),t.setAttribute("data-loaded",!0),e&&e()},a.onerror=function(){t.removeAttribute("data-original"),t.setAttribute("data-loaded",!1),t.src=n},t.src!==n&&(a.src=n)))}()}function e(){clearTimeout(t.tId),t.tId=setTimeout(t,500)}t(),document.addEventListener("scroll",e),r.addEventListener("resize",e),r.addEventListener("orientationchange",e)}(this);</script></body></html>